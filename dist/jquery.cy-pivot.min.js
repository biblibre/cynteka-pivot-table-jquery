!function(x){var e={init:function(i){var n=x.extend({},x.fn.cypivot.defaults,i),e=this;n.resizable&&x(window).resize(function(){n.resizableWidth&&z(e),n.resizableHeight&&j(e)});var l=this.each(function(){var i=x(this);if(i.data("cypivot",{target:i,options:n}),n.cookiePrefix&&n.storeDimConfig){var e=x.cookie(n.cookiePrefix+"horizontalDims"),l=x.cookie(n.cookiePrefix+"verticalDims"),s=x.cookie(n.cookiePrefix+"filterDims");e&&r(n.dimensions,e)&&r(n.dimensions,l)&&(n.horizontalDimensions=e.split(";")),l&&r(n.dimensions,e)&&r(n.dimensions,l)&&(n.verticalDimensions=l.split(";")),s&&r(n.dimensions,s)&&r(n.dimensions,s)&&(n.filterDimensions=s.split(";"))}var C,u,a="",t="";(n.configuration&&(a='      <div class="'+n.div11Class+'">'+n.configLabel+"</div>",null===document.getElementById(n.pivotConfigDialogId)&&(t='<div id="'+n.pivotConfigDialogId+'" class="'+n.configDialogClass+'"></div>')),i.html('<table class="'+n.tableClass+'">  <tr class="'+n.topRowClass+'">    <td class="'+n.cell11Class+'">'+a+'    </td>    <td class="'+n.cell12Class+'">      <div class="'+n.div12Class+'">      </div>    </td>  </tr>  <tr class="'+n.bottomRowClass+'">    <td class="'+n.cell21Class+'">      <div class="'+n.div21Class+'">      </div>    </td>    <td class="'+n.cell22Class+'">      <div class="'+n.div22Class+'-super">      <div class="'+n.div22Class+'">        <table class="'+n.pivotDataTableClass+'">      </div>      </div>    </td>  </tr></table>'+t),i.find("."+n.div22Class).on("scroll",function(){o(i,n)}),i.find("."+n.cell22Class).resize(function(){o(i,n)}),n.configuration)&&(void 0===i.find("#"+n.pivotConfigDialogId).dialog("instance")&&(i.find("."+n.div11Class).on("click",function(){!function(i,e){if(e.configuration){var l=i.find("."+e.div11Class);if(l.toggleClass(e.configWindowActivatedClass),l.hasClass(e.configWindowActivatedClass))jQuery("#"+e.pivotConfigDialogId).dialog("open");else{var s=jQuery("#"+e.pivotConfigDialogId);s.dialog("close")}}}(i,n)}),function(o,r){for(var d=o.find("."+r.configDialogClass),i={},e='<li class="'+r.dimensionListTitleClass+'" vdims="true">'+r.verticalDimensionListTitle+"</li>",l=0;l<r.verticalDimensions.length;l++){var s=r.verticalDimensions[l];i[s]=!0;var a=r.dimensions[s];e=e+'<li dim="'+s+'">'+a.label+"</li>"}r.configuration&&r.configuration.verticalDimensions||(e="");for(var t='<li class="'+r.dimensionListTitleClass+'" hdims="true">'+r.horizontalDimensionListTitle+"</li>",l=0;l<r.horizontalDimensions.length;l++){var s=r.horizontalDimensions[l];i[s]=!0;var a=r.dimensions[s];t=t+'<li dim="'+s+'">'+a.label+"</li>"}if(!r.configuration||!r.configuration.horizontalDimensions)var t="";for(var n='<li class="'+r.dimensionListTitleClass+'" fdims="true">'+r.filterDimensionListTitle+"</li>",l=0;l<r.filterDimensions.length;l++){var s=r.filterDimensions[l];i[s]=!0;for(var a=r.dimensions[s],v=y(r,[],s,""),c="<ul>",m=0;m<v.length;m++){var f=v[m];c=c+"<li><input type='checkbox' value='"+f.id+"'/>"+f.label+"</li>"}c+="</ul>",n=n+'<li dim="'+s+'">'+a.label+c+"</li>"}r.configuration&&r.configuration.filterDimensions||(n="");var C="";for(var s in r.dimensions)if(1!=i[s]){var a=r.dimensions[s];C=C+'<li dim="'+s+'">'+a.label+"</li>"}d.append('<ul class="'+r.firstDimensionListClass+'" style="padding-bottom:0px; margin-bottom:0px;"><li class="'+r.dimensionListTitleClass+'">'+r.dimensionListTitle+'</li></ul><ul class="'+r.dimensionListClass+'" style="padding-top:0px; margin-top:0px;">'+C+t+e+n+"</ul>"),d.find("ul."+r.dimensionListClass).sortable({cancel:"."+r.dimensionListTitleClass,update:function(){var e=[],l=[],s=[],a=[];if(d.find("."+r.dimensionListClass+" li").each(function(){var i=jQuery(this).attr("dim");i&&(a[a.length]=i),"true"==jQuery(this).attr("vdims")&&(a=e),"true"==jQuery(this).attr("hdims")&&(a=l),"true"==jQuery(this).attr("fdims")&&(a=s)}),r.configuration&&1==r.configuration.verticalDimensions&&(r.verticalDimensions=e),r.configuration&&1==r.configuration.horizontalDimensions&&(r.horizontalDimensions=l),r.configuration&&1==r.configuration.filterDimensions&&(r.filterDimensions=s),r.cookiePrefix&&r.storeDimConfig){var i=r.horizontalDimensions.join(";"),t=r.verticalDimensions.join(";"),n=r.filterDimensions.join(";");x.cookie(r.cookiePrefix+"horizontalDims",i,{expires:15}),x.cookie(r.cookiePrefix+"verticalDims",t,{expires:15}),x.cookie(r.cookiePrefix+"filterDims",n,{expires:15})}g(o,r)}})}(i,n),i.find("#"+n.pivotConfigDialogId).dialog({modal:!1,title:"Pivot Table Configuration",position:["right","50px"],autoOpen:!1,beforeClose:function(){i.find("."+n.div11Class).removeClass(n.configWindowActivatedClass)}})));o(i,n),g(i,n),u=n,(C=i).on("click","."+u.div12Class+" ."+u.dimLabelClass,function(i){var e,l,s=new Date,a=x(this),t=!1;if(a.hasClass(u.expandedDimLabelClass)){var n=h(a,u);if(0<n){var o=p(a,u),r=$pivotDataTable[0],d=function(i,e,l){for(var s=0,a=i.rows[0],t=0;t<l;t++){cell=a.cells[e+t];var n=jQuery(cell).width();s+=n}return s}(r,o,n-1);a.parent().find("."+u.dimCellClass).animate({opacity:0},200),function(s,a,t,n){for(var i=0;i<s.rows.length;i++)for(var e=s.rows[i],l=0;l<t;l++){var o=e.cells[a+l];jQuery(o).addClass("___animation-cypivot")}var r=!1;jQuery(".___animation-cypivot").animate({opacity:0},200,function(){if(!r){r=!0;for(var i=0;i<s.rows.length;i++)for(var e=s.rows[i],l=0;l<t;l++)a>=e.cells.count&&(a+=0),e.deleteCell(a);n&&n()}}),0==t&&n&&n()}(r,o,n-1,function(){a.parent().find("."+u.dimCellClass).remove(),a.width(d+"px");for(var i=-1,e=0;e<r.rows.length;e++){var l=r.rows[e];cell=l.cells[o],i<0&&(i=jQuery(cell).width()),jQuery(cell).addClass("___animation-cypivot")}jQuery(".___animation-cypivot").children().css({"margin-left":d+"px"});var s=!1;jQuery(".___animation-cypivot").children().animate({"margin-left":"0px"},400,function(){s||(s=!0,jQuery(".___animation-cypivot").removeClass("___animation-cypivot"))}),a.animate({width:i+"px"},400,function(){b(C,u),D(C,u)}),a.removeClass(u.expandedDimLabelClass).addClass(u.collapsedDimLabelClass),a.parent().removeClass(u.expandedDimCellClass).addClass(u.collapsedDimCellClass)})}l=u.onCollapse}else if(a.hasClass(u.collapsedDimLabelClass)){var v=p(a,u),c=a.parent();L(c,u,u.verticalDimensions);var m=h(a,u);0<m&&(a.addClass(u.expandedDimLabelClass).removeClass(u.collapsedDimLabelClass),a.parent().addClass(u.expandedDimCellClass).removeClass(u.collapsedDimCellClass),0<m&&function(i,e,l,s){for(var a=0;a<i.rows.length;a++)for(var t=i.rows[a],n=0;n<s;n++){var o=t.insertCell(l);o.className=e.dataCellClass;var r=document.createElement("div");o.appendChild(r),r.className=e.divDataCellClass}}($pivotDataTable[0],u,v,m-1),t=!0),e=u.onExpand}if(t){b(C,u),u.resizable&&(u.resizableWidth&&z(C),u.resizableHeight&&j(C));var f=new Date;l&&l(this),e&&e(this),D(C,u),jQuery("#log").html("Time = "+(f.valueOf()-s.valueOf()))}return!1}),C.on("click","."+u.div21Class+" ."+u.dimLabelClass,function(i){var e,l;if(new Date,!i.isPropagationStopped()){var s=x(this),a=s.parent(),t=!1;if(s.hasClass(u.expandedDimLabelClass)){var n=m(s,u),o=c(s,u),r=$pivotDataTable[0];0<n&&(function(i,e,l){for(var s=0;s<l;s++)i.deleteRow(e)}(r,o+1,n),a.find("."+u.dimCellClass).remove(),s.removeClass(u.expandedDimLabelClass),s.addClass(u.collapsedDimLabelClass),a.removeClass(u.expandedDimCellClass),a.addClass(u.collapsedDimCellClass),t=!0),l=u.onCollapse}else if(s.hasClass(u.collapsedDimLabelClass)){var d=c(s,u);L(a,u,u.horizontalDimensions),s.addClass(u.expandedDimLabelClass).removeClass(u.collapsedDimLabelClass),a.addClass(u.expandedDimCellClass).removeClass(u.collapsedDimCellClass);var v=m(s,u);0<v&&(function(i,e,l,s){for(var a=0;a<s;a++){for(var t=i.rows[0],n=i.insertRow(l),o=[],r=0;r<t.cells.length;r++)o.push('<td class="'+e.dataCellClass+'"><div class="'+e.divDataCellClass+'"></div></td>');jQuery(n).html(o.join(""))}}($pivotDataTable[0],u,d+1,v),t=!0),e=u.onExpand}return t&&(u.resizable&&(u.resizableWidth&&z(C),u.resizableHeight&&j(C)),b(C,u),l&&l(this),e&&e(this),D(C,u)),new Date,!1}})});return n.resizable&&(n.resizableWidth&&z(e),n.resizableHeight&&j(e)),l},options:function(i,e){return x(this).data("cypivot").options},reload:function(d,v){return this.each(function(){var i=new Date,e=x(this),l=e.data("cypivot");if(d&&(l.options.data=d),v){for(var s=e.find("."+l.options.div22Class+" ."+l.options.pivotDataTableClass)[0],a=0;a<s.rows.length;a++)for(var t=s.rows[a],n=0;n<t.cells.length;n++){var o=t.cells[n];C(o.colContext,v.colContext)&&C(o.rowContext,v.rowContext)&&(o.isCalculated=!1)}b(e,l.options)}else b(e,l.options,!0);var r=new Date;jQuery("#log").html("Reload Time = "+(r.valueOf()-i.valueOf()))})}};function p(i,e){var l;l=i.hasClass(e.levelClassPrefix+"0")?i.parent():i.parents("."+e.levelClassPrefix+"0").parent();var s=0,a=!1;return l.find("."+e.dimLabelClass).each(function(){if(!a){if(this==i[0])return!(a=!0);0==x(this).parent().children("."+e.dimCellClass).size()&&s++}}),s}function c(i,e){var l;l=i.hasClass(e.levelClassPrefix+"0")?i.parent():i.parents("."+e.levelClassPrefix+"0").parent();var s=0,a=!1;return l.find("."+e.dimLabelClass).each(function(){if(!a){if(this==i[0])return!(a=!0);x(this);s++}}),s}function h(i,e){var l=i.parent(),s=0;i[0];return l.find("."+e.dimLabelClass).each(function(){0==x(this).parent().children("."+e.dimCellClass).size()&&s++}),s}function m(i,e){var l=i.parent(),s=i[0];return l.find("."+e.dimLabelClass).not(s).size()}function g(i,e){var l=i.find("."+e.div21Class);l.html(""),L(l,e,e.horizontalDimensions,[]);var s,a,t=i.find("."+e.div12Class);t.html(""),L(t,e,e.verticalDimensions,[]),s=i,a=e,$pivotDataTable=s.find("."+a.div22Class+" ."+a.pivotDataTableClass),$pivotDataTable.html(""),function n(o,r,d,v){var i=d.horizontalDimensions[v.length],c=T(v),m=d.dimensions[i];if(m){var e,l=function(i){for(var e=0;e<i.length;e++){var l=i[e];c[v.length]=l;var s=r[0],a=s.insertRow(-1),t=jQuery(a);t.addClass(d.dataRowClass+" "+d.levelClassPrefix+v.length+" "+d.pivotIdClassPrefix+l.id+' " pivotId = "'+l.id),w(o,r,t,d,c,[]),d.isExpanded(c)&&c.length<d.horizontalDimensions.length&&(n(o,r,d,c),m.showTotal)}D(o,d)};null!=(e=m.values?m.values(v,l):y(d,v,i,m.sortFieldName))&&l(e)}}(s,$pivotDataTable,a,[]),b(s,a),D(s,a)}function b(i,e,l){for(var s,a,t,n,o,r=(s=e,a=[],i.find("."+s.div21Class+" ."+s.dimCellClass).each(function(){a[a.length]=this.pivotContext}),a),d=(t=e,n=[],i.find("."+t.div12Class+" ."+t.dimCellClass).not("."+t.expandedDimCellClass).each(function(){n[n.length]=this.pivotContext}),n),v=i.find("."+e.div22Class+" ."+e.pivotDataTableClass)[0],c=0;c<v.rows.length;c++){var m=v.rows[c],f=r[c];o=null;for(var C=0;C<m.cells.length;C++){var u=d[C],p=m.cells[C];if(p.colContext=u,p.rowContext=f,1!=p.isCalculated||1==l){null==o&&(o=e.map(f,[],e.data));var h=e.map(f,u,o.default),g=e.reduce(h),b="";if(e.dataCellRenderer)b=e.dataCellRenderer(g,u,f,e);else if(0<x("#cellTemplate").size()){var D=x("#cellTemplate").html();b=_.template(D,{items:g,rowContext:f,colContext:u,options:e})}jQuery(p).html('<div class="'+e.divDataCellClass+'">'+b+"</div>"),p.isCalculated=!0}}}}function D(i,e){var l,r,d,v,s,a,t,n;1==e.syncDimensionCellSizes&&(a=e,(t=(s=i).find("."+a.div22Class+" ."+a.pivotDataTableClass)[0]).rows[0],n=0,s.find("."+a.div21Class+" ."+a.dimLabelClass).each(function(){var i=t.rows[n],e=jQuery(i),l=jQuery(this),s=e.innerHeight()-2+"px";l.css({height:s}),n++}),r=e,d=(l=i).find("."+r.div22Class+" ."+r.pivotDataTableClass)[0].rows[0],v=0,d&&l.find("."+r.dimLabelClass).each(function(){var i=jQuery(this);if(i.hasClass(r.expandedDimLabelClass))i.parent().css({width:""});else{var e=d.cells[v],l=jQuery(e);i.parent().removeAttr("width");var s=l.outerWidth()+"px";if(v<d.cells.length-1){var a=d.cells[v+1],t=jQuery(a),n=l.position(),o=t.position();s=o.left-n.left}i.parent().css({width:s}),v++}}))}function y(i,e,l,s){for(var a=[],t=i.dimData?i.dimData:i.data,n=0;n<t.length;n++){f(d=t[n],e)&&a.push(d)}var o=[],r={};for(n=0;n<a.length;n++){f(d=a[n],e);var d,v=d[l],c="object"==typeof v?v.id:v;v&&v!=Number.POSITIVE_INFINITY&&1!=r[c]&&(r[c]=!0,o.push(v))}return null!=s&&(o=o.sort(function(i,e){return i[s]<e[s]?-1:i[s]>e[s]?1:0})),o}function f(i,e){for(var l in e){var s,a=e[l],t=a.dimName,n=a.id,o=i[t];if(null!=o)if(null!=(s="number"==typeof o?o:"string"==typeof o?o:o.id)&&null!=s&&n!=s&&s!=Number.POSITIVE_INFINITY)return!1}return!0}function w(i,e,l,s,a,t){var n=s.verticalDimensions[t.length],o=T(t),r=s.dimensions[n],d=a[a.length-1],v=l[0];if(r)for(var c=r.values?r.values(t):y(s,t,n,r.sortFieldName),m=0;m<c.length;m++){var f=c[m];if(o[t.length]=f,s.isExpanded(o)&&o.length<s.verticalDimensions.length){if(w(i,e,l,s,a,o),r.showTotal){var C=v.insertCell(v.cells.length),u=jQuery(C);C.className=s.dataCellClass+" "+s.dataTotalCellClass+" "+s.levelClassPrefix+t.length+" "+s.pivotIdClassPrefix+f.id,u.attr("pivotId",f.id),u.html('<div class="'+s.divDataCellClass+'">Total '+f.label+"</div>"),C.rowContext=a,C.colContext=t}}else{C=v.insertCell(v.cells.length);(u=jQuery(C)).addClass(s.dataCellClass+" "+s.levelClassPrefix+t.length+" "+s.pivotIdClassPrefix+f.id),u.attr("pivotId",f.id);var p="object"==typeof d?d.label:d;u.html('<div class="'+s.divDataCellClass+'">'+p+" - "+p+"</div>")}}}function L(i,e,l,s){s?i[0].pivotContext=T(s):s=i[0].pivotContext;var a=l[s.length],t=T(s),n=e.dimensions[a],o=i.find("."+e.dimTotalCellClass);if(n){var r=n.values?n.values(s):y(e,s,a,n.sortFieldName);0<r.length&&i.children("."+e.dimLabelClass).css({width:""});for(var d=0;d<r.length;d++){var v=r[d],c="object"==typeof v?v.id:v,m="object"==typeof v?v.label:v;v.dimName=a,t[s.length]=v;var f=document.createElement("div");f=0<o.size()?i[0].insertBefore(f,o[0]):i[0].appendChild(f),(p=jQuery(f)).addClass(e.dimCellClass+" "+e.dimCellClass+"-"+a+" "+e.levelClassPrefix+s.length+" "+e.pivotIdClassPrefix+c),p.attr({pivotId:c,dimName:a,title:n.label+" : "+unescape(m)});var C=e.dimensionCellRenderer?e.dimensionCellRenderer(e,t,!1):"<span title='"+n.label+": "+m+"'><i class='"+e.dimCellIconClass+"'></i>"+m+"</span>";p.append('<div class="'+e.dimLabelClass+" "+e.dimLabelClass+"-"+a+" "+(n.className?n.className+" ":"")+(t.length<l.length?e.expandableDimLabelClass:"")+'">'+C+"</div>");var u=p.children("."+e.dimLabelClass);if(f.pivotContext=T(t),e.isExpanded(t)&&t.length<l.length)u.addClass(e.expandedDimLabelClass),u.parent().addClass(e.expandedDimCellClass),L(i.children("."+e.pivotIdClassPrefix+c),e,l,t);else t.length<l.length&&(u.addClass(e.collapsedDimLabelClass),u.parent().addClass(e.collapsedDimCellClass))}if(0==o.size()&&0<s.length&&l==e.verticalDimensions){var p;f=document.createElement("div");f=i[0].appendChild(f),(p=jQuery(f)).addClass(e.dimCellClass),p.addClass(e.dimTotalCellClass),p.addClass(e.levelClassPrefix+s.length),p.attr("dimName",a),f.pivotContext=T(s);C=e.dimensionCellRenderer?e.dimensionCellRenderer(e,t,!0):"";p.append('<div class="'+e.dimLabelClass+'">Total</div>')}}}function o(i,e){var l=function(){var i=document.createElement("p");i.style.width="100%",i.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(i),document.body.appendChild(e);var l=i.offsetWidth;e.style.overflow="scroll";var s=i.offsetWidth;l==s&&(s=e.clientWidth);return document.body.removeChild(e),l-s}(),s=i.find("."+e.div22Class);e.autoSize||i.find("."+e.div12Class).css({});s.height();e.autoSize||i.find("."+e.div21Class).css({"margin-bottom":l+"px"}),i.find("."+e.div12Class).scrollLeft(s.scrollLeft()),i.find("."+e.div21Class).scrollTop(s.scrollTop())}function T(i){if(!i||"object"!=typeof i)return i;var e,l,s="function"==typeof i.pop?[]:{};for(e in i)i.hasOwnProperty(e)&&(l=i[e],s[e]=l&&"object"==typeof l?T(l):l);return s}function d(i,e){for(var l=0;l<e.length;l++){var s=e[l],a=i[s.dimName];if("object"==typeof a&&null!=a&&(a=a.id),s.id!=a)return!1}return!0}function v(i,e,l){var s={};for(var a in l){var t=l[a],n=t.dimName,o=t.id;if(o!=e[n])return!1;s[n]=o}for(var a in i.dimensions)if(null==s[a]&&null!=e[a])return!1;return!0}function z(i){var e=i.find(".div22").offset().left;i.find(".div22").css({width:window.innerWidth-e+"px"}),i.find(".div12").css({})}function j(i){var e=i.find(".div22").offset().top;i.find(".div22").css({height:window.innerHeight-e+"px"}),i.find(".div21").css({height:window.innerHeight-e+"px"})}function C(i,e){if(e.length<i.length)return!1;for(var l=0;l<i.length;l++)if(i[l].id!=e[l].id)return!1;return!0}function r(i,e){e=e.split(";");for(var l=0;l<e.length;l++){if(null==i[e[l]])return!1}return!0}x.fn.cypivot=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void x.error("Method "+i+" does not exist on jQuery.tooltip"):e.init.apply(this,arguments)},x.fn.cypivot.defaults={syncDimensionCellSizes:!0,resizable:!0,resizableWidth:!0,resizableHeight:!0,autoSize:!1,tableClass:"cypivot",topRowClass:"top-row",bottomRowClass:"bottom-row",cell11Class:"cell11",cell12Class:"cell12",cell21Class:"cell21",cell22Class:"cell22",div11Class:"div11",div12Class:"div12",div21Class:"div21",div22Class:"div22",pivotDataTableClass:"pivot-data-table",dimLabelClass:"dim-label",dimCellIconClass:"dim-cell-icon",dimCellClass:"dim-cell",expandableDimLabelClass:"expandable-dim-label",expandedDimLabelClass:"expanded-dim-label",collapsedDimLabelClass:"collapsed-dim-label",expandedDimCellClass:"expanded-dim-cell",collapsedDimCellClass:"collapsed-dim-cell",dimTotalCellClass:"dim-total-cell",dataTotalCellClass:"data-total-cell",levelClassPrefix:"level-",dataRowClass:"data-row",dataCellClass:"data-cell",divDataCellClass:"div-data-cell",configDialogClass:"config-dialog",dimensionListTitle:"Dimensions",horizontalDimensionListTitle:"Rows",verticalDimensionListTitle:"Columns",filterDimensionListTitle:"Filters",configWindowActivatedClass:"config-window-activated",dimensionListClass:"dimension-list",firstDimensionListClass:"first-dimension-list",dimensionListTitleClass:"dimension-list-title",verticalDimensionListClass:"vertical-dimension-list",horizontalDimensionListClass:"horizontal-dimension-list",filterDimensionListClass:"filter-dimension-list",pivotIdClassPrefix:"pivot-id-",pivotConfigDialogId:"pivot-config-dialog",isExpanded:function(i){return 0==i.length},configuration:{horizontalDimensions:!0,verticalDimensions:!0,filterDimensions:!1},configLabel:"Config",cookiePrefix:"cy-pivot-",storeDimConfig:!0,dataCellRenderer:function(i,e,l,s){return i.default.sum.amount},dimensionCellRenderer:null,dimensions:{dim1:{label:"Colors",values:function(i){return[{id:1,label:"Red"},{id:2,label:"Blue"},{id:3,label:"Green"}]},showTotal:!0},dim2:{label:"Cities",values:function(i){return[{id:1,label:"Saint-Petersburg"},{id:2,label:"Moscow"},{id:3,label:"London"},{id:4,label:"Paris"}]},showTotal:!0},dim3:{label:"Shapes",values:function(i){return[{id:1,label:"Round"},{id:2,label:"Square"},{id:3,label:"Star"},{id:4,label:"Ellipse"}]},showTotal:!0},dim4:{label:"Planets",values:function(i){return[{id:1,label:"Earth"},{id:2,label:"Moon"},{id:3,label:"Mars"},{id:4,label:"Neptune"}]},showTotal:!0},dim5:{label:"Geo",values:function(i){return[{id:1,label:"Asia"},{id:2,label:"Africa"},{id:3,label:"Europe"},{id:4,label:"America"}]},showTotal:!0},dim6:{label:"Lessons",values:function(i){return[{id:1,label:"Phisics"},{id:2,label:"Chemistry"},{id:3,label:"Math"},{id:4,label:"Geography"}]},showTotal:!0}},horizontalDimensions:["dim1","dim3","dim5"],verticalDimensions:["dim2"],filterDimensions:[],data:[{dim1:"Red",dim2:"Saint-Petersburg",dim3:"Round",dim4:"Earth",dim5:"Asia",dim6:"Phisics",value:1},{dim1:"Red",dim2:"Saint-Petersburg",dim3:"Round",dim4:"Earth",dim5:"Asia",dim6:"Chemistry",value:1},{dim1:"Blue",dim2:"Saint-Petersburg",dim3:"Round",dim4:"Earth",dim5:"Asia",dim6:"Chemistry",value:1},{dim1:"Green",dim2:"Moscow",dim3:"Round",dim4:"Earth",dim5:"Asia",dim6:"Chemistry",value:1}],map:function(i,e,l){for(var s=[],a=[],t=[],n=0;n<i.length;n++){var o=i[n];t.push(o)}for(n=0;n<e.length;n++){o=e[n];t.push(o)}for(n=0;n<l.length;n++){var r=l[n];d(r,t)&&s.push(r),v(this,r,t)&&(a[a.length]=r)}return{default:s,stricted:a}},valueDataFields:["value"],reduce:function(i){var e={};for(itemsKey in i){for(var l=i[itemsKey],s={},a={},t={},n=0;n<this.valueDataFields.length;n++){for(var o=this.valueDataFields[n],r=0,d=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,c=0;c<l.length;c++){var m=l[c][o];r+=m,m<v&&(v=m),d<m&&(d=m)}s[o]=r,a[o]=d,t[o]=v}e[itemsKey]={},e[itemsKey].sum=s,e[itemsKey].count=l.length,e[itemsKey].avg=s/l.length,e[itemsKey].max=a,e[itemsKey].min=t}return e},reduces:[{valueDataFields:["value"],map:"default",reduce:function(i,e){for(var l={},s={},a=0;a<this.valueDataFields.length;a++){l[d=this.valueDataFields[a]]=0,s[d]=i.length}var t={},n={};for(a=0;a<i.length;a++)for(var o=i[a],r=0;r<this.valueDataFields.length;r++){var d;l[d=this.valueDataFields[r]]+=o[d],n[d]?n[d]>o[d]&&(n[d]=o[d]):n[d]=o[d],t[d]?t[d]>o[d]&&(t[d]=o[d]):t[d]=o[d]}return e&&(e.sum=l,e.count=i.length,e.avg=l/i.length,e.max=t,e.min=n),l}}]}}(jQuery);
//# sourceMappingURL=jquery.cy-pivot.min.js.map